# Подтверждение сайта в Яндекс.Вебмастер и Google Search Console

Инструкция для iptv-best.ru. Коды верификации подставляются через переменные окружения и попадают в `<head>` сайта.

---

## 1. Яндекс.Вебмастер

### Шаг 1: Добавить сайт
1. Откройте [Яндекс.Вебмастер](https://webmaster.yandex.ru/).
2. Войдите под аккаунтом Яндекса.
3. Нажмите **«Добавить сайт»** и укажите `https://iptv-best.ru`.

### Шаг 2: Выбрать способ проверки
Яндекс предлагает несколько способов. Удобнее всего **мета-тег**.

1. Выберите способ **«Мета-тег в коде главной страницы»**.
2. Скопируйте значение из атрибута `content` тега.  
   Пример: тег выглядит как  
   `<meta name="yandex-verification" content="abc123def456..." />`  
   — нужна только часть **`abc123def456...`** (без кавычек).

### Шаг 3: Вписать код в проект
В корне проекта создайте файл `.env.local` (если его ещё нет) и добавьте строку:

```env
NEXT_PUBLIC_YANDEX_VERIFICATION=ваш_код_из_вебмастера
```

Подставьте вместо `ваш_код_из_вебмастера` скопированный код (только значение `content`).

### Шаг 4: Задеплоить и проверить
1. Соберите и задеплойте сайт (`npm run build` и выкладка на хостинг).
2. В Вебмастере нажмите **«Проверить»**.
3. После успешной проверки сайт появится в списке с подтверждённым статусом.

### Дополнительно в Вебмастере
- В разделе **«Индексирование» → «Файлы Sitemap»** добавьте:  
  `https://iptv-best.ru/sitemap.xml`
- Так Яндекс будет подтягивать список страниц из вашей карты сайта.

---

## 2. Google Search Console

### Шаг 1: Добавить ресурс
1. Откройте [Google Search Console](https://search.google.com/search-console).
2. Войдите под аккаунтом Google.
3. Нажмите **«Добавить ресурс»**.
4. Выберите **«Префикс URL»** и введите `https://iptv-best.ru`.

### Шаг 2: Способ проверки «HTML-тег»
1. В списке способов проверки выберите **«HTML-тег»**.
2. Google покажет тег вида:  
   `<meta name="google-site-verification" content="XXXXXXXXXX..." />`
3. Скопируйте только значение **content** — строку `XXXXXXXXXX...` (без кавычек).

### Шаг 3: Вписать код в проект
В тот же `.env.local` добавьте (или отредактируйте):

```env
NEXT_PUBLIC_GOOGLE_SITE_VERIFICATION=ваш_код_из_search_console
```

Подставьте скопированный код из Search Console.

### Шаг 4: Задеплоить и проверить
1. Соберите и задеплойте сайт.
2. В Search Console нажмите **«Проверика»**.
3. После успешной проверки ресурс станет «Владелец подтверждён».

### Дополнительно в Search Console
- В меню слева: **«Файлы Sitemap»** → укажите адрес:  
  `https://iptv-best.ru/sitemap.xml`  
  и отправьте.
- Так Google будет использовать вашу карту сайта для индексирования.

---

## Где в проекте это используется

В `app/layout.tsx` в объект `metadata` добавлено поле:

```ts
verification: {
  google: process.env.NEXT_PUBLIC_GOOGLE_SITE_VERIFICATION || undefined,
  yandex: process.env.NEXT_PUBLIC_YANDEX_VERIFICATION || undefined
}
```

Next.js выведет в `<head>` страниц:
- `<meta name="google-site-verification" content="..." />` — если задан `NEXT_PUBLIC_GOOGLE_SITE_VERIFICATION`;
- `<meta name="yandex-verification" content="..." />` — если задан `NEXT_PUBLIC_YANDEX_VERIFICATION`.

Файл `.env.local` в репозиторий обычно не коммитят (он уже в `.gitignore` у Next.js), поэтому коды верификации не попадут в открытый доступ. На хостинге (Vercel, Netlify, свой сервер) эти переменные нужно задать в настройках окружения.

---

## Альтернативные способы (если мета-тег не подходит)

**Яндекс**
- **HTML-файл**: в Вебмастере выберите проверку «Файл HTML». Скачайте файл (например, `yandex_xxxxxxxx.html`) и положите его в папку `public/` проекта. По адресу `https://iptv-best.ru/yandex_xxxxxxxx.html` файл будет доступен.
- **DNS**: в настройках домена добавьте TXT-запись, которую покажет Вебмастер.

**Google**
- **HTML-файл**: в Search Console выберите «HTML-файл», скачайте `googlexxxxxxxx.html`, положите в `public/`. URL будет `https://iptv-best.ru/googlexxxxxxxx.html`.
- **Google Analytics**: если уже подключён GA4 с этим сайтом, можно подтвердить владение через него.
- **DNS**: добавьте TXT-запись в панели управления доменом, как указано в Search Console.

После первой проверки мета-теги можно не удалять — они не мешают и пригодятся при смене хостинга или повторной привязке аккаунта.

# Рекомендации по улучшению IPTV Best

Список идей для дальнейшего развития сайта. Большая часть внедрена.

---

## Уже сделано
- **Блог**: карточки статей кликабельны; даты публикации (`publishedDate`) в данных и в интерфейсе; sitemap использует даты как `lastModified`.
- **Sitemap**: все статьи блога и страница `/search`.
- **robots.txt**: `Disallow: /go/`, `Disallow: /api/`.
- **next.config**: убрана устаревшая опция `experimental.appDir`.
- **404**: кастомная страница `app/not-found.tsx` со ссылками на главную, рейтинг, блог, FAQ.
- **Провайдеры**: `generateMetadata` с canonical, Open Graph, og:image; JSON-LD Product и BreadcrumbList; визуальные хлебные крошки (`Breadcrumbs`); Next 15 async params.
- **Сравнение**: в таблице добавлена строка «Сайт» с ссылкой «Перейти на сайт» через `/go/[slug]`.
- **Поиск**: страница `/search` — поиск по провайдерам и статьям; пункт «Поиск» в меню.
- **Главная**: фильтры синхронизируются с URL (`?q=…&tags=…`); пагинация «Показать ещё 10».
- **Переход на сайт провайдера**: страница `/go/[slug]` запрашивает API, отправляет цель Метрики `go_provider`, затем редирект.
- **Политика конфиденциальности**: добавлены формулировки про редиректы `/go/` и Яндекс.Метрику.
- **Header**: возврат фокуса на кнопку меню после закрытия; видимое кольцо фокуса.
- **Загрузка**: скелетон `app/providers/[slug]/loading.tsx`.
- **Open Graph**: в layout и на странице провайдера указан `og:image` (ожидается файл `/og.png` в public).

---

## SEO и технические
- **Canonical и Open Graph на страницах провайдеров** — проверить, что у каждой есть `generateMetadata` с `canonical` и `openGraph` (url, title, description).
- **Схема Organization / Product** на странице провайдера — добавить JSON-LD для провайдера (название, описание, рейтинг) для расширенных сниппетов.
- **Breadcrumbs** — на внутренних страницах (обзор провайдера, статья блога, инструменты) добавить разметку «хлебных крошек» (Schema.org BreadcrumbList + визуально).
- **Open Graph image** — общая или генерируемая картинка для шаринга (og:image) для главной и ключевых страниц.
- **Next.js 15 и params** — в маршрутах с динамическим `[slug]` в Next 15 `params` приходит как `Promise`; при обновлении версии использовать `await params` в `generateMetadata` и в компоненте страницы.
- **Страница 404** — кастомная `app/not-found.tsx` в стиле сайта с ссылками на главную, рейтинг, блог.

---

## Контент и UX
- **Поиск по сайту** — форма поиска по провайдерам и статьям (на главной или в шапке).
- **Ссылка «Сравнить» на странице сравнения** — в таблице сравнения добавить кнопку «Перейти на сайт» (через `/go/[slug]`) для каждого провайдера.
- **Даты в блоге** — выводить дату публикации/обновления у статей и в sitemap использовать её как `lastModified`.
- **Пагинация или «Показать ещё»** — на главной при большом числе провайдеров; на странице списка провайдеров при росте базы.
- **Фильтры в URL** — сохранять выбранные теги и поисковый запрос в query (например `?tags=4k,sport`), чтобы можно было делиться ссылкой на подборку.

---

## Производительность и доступность
- **Lazy-load карточек** — для длинного списка провайдеров подключать виртуализацию или отложенную подгрузку.
- **Скелетоны загрузки** — для страниц с данными (например, обзор провайдера) показывать skeleton UI вместо пустого экрана.
- **Фокус и клавиатура** — после закрытия мобильного меню возвращать фокус на кнопку «Меню»; проверить навигацию с клавиатуры и видимость фокуса (outline).

---

## Конверсия и аналитика
- **Отслеживание кликов по «Перейти на сайт»** — в Яндекс.Метрике отправлять цель или событие при переходе по `/go/[slug]` (например, через middleware или обработчик на клиенте перед редиректом).
- **A/B или альтернативные CTA** — тестировать формулировки и расположение кнопок «Перейти на сайт» и «Смотреть обзор».

---

## Безопасность и политики
- **CSP (Content-Security-Policy)** — при необходимости ограничить источники скриптов и стилей (учесть Метрику и будущие виджеты).
- **Политика конфиденциальности** — убедиться, что в тексте упомянуты редиректы `/go/`, передача данных в Метрику и любые cookie.

---

## Дополнительные идеи (что ещё можно сделать)

### Контент и вовлечение
- **RSS для блога** — маршрут `/blog/feed.xml` или `/feed.xml` для подписки в ридерах; увеличивает охват и возврат.
- **«Похожие провайдеры»** — внизу страницы провайдера блок из 3–4 карточек по тем же тегам или категории.
- **«Похожие статьи»** — в конце статьи блога 2–3 ссылки на другие материалы по тегу или по смыслу.
- **Короткие подборки на главной** — например «Топ-3 до $2» и «Лучшие для спорта» со ссылками на провайдеров и на подборки.

### Доступность и UX
- **Ссылка «Перейти к контенту»** — скрытая до фокуса ссылка в начале страницы для перехода к основному контенту (минуя шапку).
- **Согласие на cookie/Метрику** — баннер или футер-ссылка «Мы используем cookie…» с возможностью отказа (и отложенной загрузкой Метрики при отказе).
- **Явная кнопка «Поделиться»** — на странице провайдера или статьи: Web Share API или копирование ссылки в буфер.

### Техника и надёжность
- **Error boundary** — глобальный или по разделам `error.tsx` в App Router, чтобы при сбое показывать своё сообщение и ссылку на главную.
- **Проверка окружения** — при старте или в CI проверять наличие нужных переменных (NEXT_PUBLIC_*, URL сайта), чтобы не задеплоить с пустыми настройками.
- **Лимит частоты для API** — для `/api/go/[slug]` простой rate limit по IP, чтобы снизить риск злоупотреблений.

### SEO и распространение
- **Отдельная карта для блога** — `sitemap-blog.xml` или индекс sitemap с разбивкой по типам страниц (статичные, провайдеры, блог).
- **Мини-превью при наведении** — для карточек провайдеров на главной можно добавить `title` или тултип с ценой и тестом (улучшает понимание до клика).
- **Яндекс.Вебмастер** — добавить сайт и sitemap в Вебмастер для мониторинга индексации и ошибок.

### Конверсия и аналитика
- **Цель «Добавил в сравнение»** — отправлять событие/цель в Метрику при нажатии «Сравнить» (полезно для воронки).
- **Параметры визита** — при переходе по `/go/[slug]` передавать в цель Метрики slug провайдера, чтобы в отчётах видеть, кто конвертирует лучше.
- **Отдельная цель «Открыл таблицу сравнения»** — при клике по кнопке «Открыть таблицу сравнения» на главной.

### Безопасность и политики
- **CSP** — при желании ужесточить безопасность: заголовок Content-Security-Policy с разрешением только своих доменов и Метрики (осторожно с инлайновыми скриптами).
- **Явное упоминание партнёрских ссылок** — в футере или «О проекте» короткая фраза: «Мы можем получать комиссию при переходе к провайдерам» (если применимо).

### Удобство разработки
- **Скрипт обновления данных** — если провайдеры/блог будут храниться в CMS или таблицах: скрипт или GitHub Action для периодического обновления `providers.ts` / `blogPosts.ts`.
- **Локальная проверка битых ссылок** — скрипт (например, на Node или в CI), который проверяет, что все `/go/[slug]` и внутренние ссылки ведут на существующие страницы.

---

Приоритет можно задать по целям: трафик (SEO, блог, sitemap, RSS), удобство (поиск, фильтры, «перейти к контенту», cookie), монетизация (цели в Метрике, партнёрские оговорки), надёжность (error boundary, rate limit, проверки).
